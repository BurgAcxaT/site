<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoTracker - –î–Ω–µ–≤–Ω–∏–∫ —ç–∫–æ-–ø—Ä–∏–≤—ã—á–µ–∫</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 50%, #2ecc71 100%);
            min-height: 100vh;
            overflow-x: hidden;
            transition: background 0.5s ease;
        }

        body.dark-theme {
            background: linear-gradient(135deg, #0a3d2f 0%, #1a5c45 50%, #0d4d3a 100%);
        }

        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .star {
            position: absolute;
            width: 3px;
            height: 3px;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            padding: 40px 20px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: fadeInDown 1s;
            position: relative;
        }

        .logo-container {
            width: 120px;
            height: 120px;
            margin: 0 auto 20px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 64px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            border: 3px solid rgba(255, 255, 255, 0.4);
            transition: all 0.3s;
        }

        .logo-container:hover {
            transform: scale(1.1) rotate(10deg);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.3);
        }

        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.4);
            border-radius: 50px;
            padding: 10px 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            color: white;
            font-weight: bold;
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.5);
            transform: scale(1.05);
        }

        .support-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: none;
            border-radius: 50px;
            padding: 12px 25px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            color: white;
            font-weight: bold;
            text-decoration: none;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .support-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.3);
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            font-size: 48px;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 18px;
            color: rgba(255, 255, 255, 0.9);
        }

        .auth-section {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(15px);
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            animation: fadeIn 1.2s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .auth-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tab-button {
            flex: 1;
            padding: 12px 20px;
            border: none;
            background: rgba(255, 255, 255, 0.3);
            color: white;
            font-size: 16px;
            cursor: pointer;
            border-radius: 15px;
            transition: all 0.3s;
        }

        .tab-button.active {
            background: rgba(255, 255, 255, 0.5);
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .tab-button:hover {
            background: rgba(255, 255, 255, 0.4);
        }

        .form-group {
            margin-bottom: 15px;
        }

        input {
            width: 100%;
            padding: 15px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            transition: all 0.3s;
        }

        input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        input:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.6);
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.02);
        }

        .btn {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 15px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .btn-primary {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        body.dark-theme .btn-primary {
            background: linear-gradient(135deg, #0a3d2f 0%, #1a5c45 100%);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .main-content {
            display: none;
        }

        .main-content.active {
            display: block;
        }

        .welcome-card {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(15px);
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s;
            animation: slideUp 0.8s;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .stat-title {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 10px;
        }

        .stat-value {
            font-size: 36px;
            font-weight: bold;
            color: white;
        }

        .progress-section {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(15px);
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .progress-bar-container {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            height: 40px;
            overflow: hidden;
            margin-top: 15px;
            position: relative;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #11998e, #38ef7d);
            transition: width 0.5s ease;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            box-shadow: 0 0 20px rgba(17, 153, 142, 0.5);
            min-width: 80px;
        }

        body.dark-theme .progress-bar {
            background: linear-gradient(90deg, #0a3d2f, #1a5c45);
            box-shadow: 0 0 20px rgba(10, 61, 47, 0.7);
        }

        .progress-text-overlay {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            pointer-events: none;
        }

        .habits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .habit-card {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .habit-card:hover {
            transform: scale(1.05) rotate(2deg);
            border-color: rgba(255, 255, 255, 0.5);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .habit-icon {
            font-size: 48px;
            margin-bottom: 10px;
        }

        .habit-name {
            color: white;
            font-weight: bold;
            font-size: 16px;
        }

        .habit-points {
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            margin-top: 5px;
        }

        .feed-section {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(15px);
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            margin-bottom: 30px;
        }

        .feed-item {
            background: rgba(255, 255, 255, 0.3);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #11998e;
            transition: all 0.3s;
            animation: slideInRight 0.5s;
        }

        body.dark-theme .feed-item {
            border-left: 4px solid #0a3d2f;
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .feed-item:hover {
            transform: translateX(5px);
            background: rgba(255, 255, 255, 0.4);
        }

        .feed-user {
            font-weight: bold;
            color: white;
            margin-bottom: 5px;
        }

        .feed-action {
            color: rgba(255, 255, 255, 0.9);
        }

        .feed-time {
            color: rgba(255, 255, 255, 0.6);
            font-size: 12px;
            margin-top: 5px;
        }

        .loader {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 20px 30px;
            border-radius: 15px;
            color: white;
            font-weight: bold;
            z-index: 1000;
            animation: slideInFromRight 0.5s;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        @keyframes slideInFromRight {
            from {
                transform: translateX(400px);
            }
            to {
                transform: translateX(0);
            }
        }

        .notification.success {
            background: linear-gradient(135deg, #11998e, #38ef7d);
        }

        body.dark-theme .notification.success {
            background: linear-gradient(135deg, #0a3d2f, #1a5c45);
        }

        .notification.error {
            background: linear-gradient(135deg, #ff6b6b, #ee5a6f);
        }

        .logout-btn {
            background: rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            float: right;
            transition: all 0.3s;
        }

        .logout-btn:hover {
            background: rgba(255, 255, 255, 0.5);
            transform: scale(1.05);
        }

        h2 {
            color: white;
            margin-bottom: 20px;
            font-size: 28px;
        }

        .floating-shapes {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 0;
        }

        .shape {
            position: absolute;
            opacity: 0.1;
            animation: float 20s infinite;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            50% {
                transform: translateY(-100px) rotate(180deg);
            }
        }

        .section-title {
            font-size: 24px;
            color: white;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .my-actions-section {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(15px);
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .action-item {
            background: rgba(255, 255, 255, 0.3);
            padding: 15px 20px;
            border-radius: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
        }

        .action-item:hover {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(1.02);
        }

        .action-info {
            color: white;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .btn-small {
            padding: 8px 15px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .btn-edit {
            background: linear-gradient(135deg, #11998e, #38ef7d);
            color: white;
        }

        body.dark-theme .btn-edit {
            background: linear-gradient(135deg, #0a3d2f, #1a5c45);
        }

        .btn-delete {
            background: linear-gradient(135deg, #ff6b6b, #ee5a6f);
            color: white;
        }

        .btn-small:hover {
            transform: scale(1.1);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 25px;
            max-width: 500px;
            width: 90%;
            animation: zoomIn 0.3s;
        }

        @keyframes zoomIn {
            from {
                transform: scale(0.7);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .modal-content h3 {
            margin-bottom: 20px;
            color: #11998e;
        }

        body.dark-theme .modal-content h3 {
            color: #0a3d2f;
        }

        .modal-content input,
        .modal-content select {
            color: #333;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn-cancel {
            background: #ccc;
            color: #333;
        }

        .footer {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(15px);
            border-radius: 25px;
            padding: 30px;
            margin-top: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            text-align: center;
        }

        .contacts-title {
            color: white;
            font-size: 24px;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .contacts-grid {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .contact-item {
            background: rgba(255, 255, 255, 0.3);
            padding: 15px 25px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            text-decoration: none;
            color: white;
            font-weight: bold;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .contact-item:hover {
            background: rgba(255, 255, 255, 0.5);
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .contact-icon {
            font-size: 24px;
        }

        .contact-text {
            font-size: 16px;
        }

        .leaderboard-section {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(15px);
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .leaderboard-item {
            background: rgba(255, 255, 255, 0.3);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
        }

        .leaderboard-item:hover {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(1.02);
        }

        .leaderboard-rank {
            font-size: 32px;
            font-weight: bold;
            color: white;
            width: 60px;
            text-align: center;
        }

        .leaderboard-user {
            flex: 1;
            color: white;
            font-size: 20px;
            font-weight: bold;
        }

        .leaderboard-points {
            color: white;
            font-size: 24px;
            font-weight: bold;
        }

        .leaderboard-item:nth-child(1) .leaderboard-rank { color: #ffd700; }
        .leaderboard-item:nth-child(2) .leaderboard-rank { color: #c0c0c0; }
        .leaderboard-item:nth-child(3) .leaderboard-rank { color: #cd7f32; }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    <div class="floating-shapes" id="shapes"></div>

    <div class="container">
        <div class="header">
            <a href="https://t.me/Ashatbort" target="_blank" class="support-btn">
                <i class="fas fa-life-ring"></i>
                <span>–ü–æ–¥–¥–µ—Ä–∂–∫–∞</span>
            </a>
            <div class="theme-toggle" id="themeToggle">
                <span id="themeIcon">üåô</span>
                <span id="themeText">–¢–µ–º–Ω–∞—è</span>
            </div>
            <div class="logo-container">
                üåç
            </div>
            <h1>üåø EcoTracker</h1>
            <p class="subtitle">–¢–≤–æ–π –¥–Ω–µ–≤–Ω–∏–∫ —ç–∫–æ-–ø—Ä–∏–≤—ã—á–µ–∫</p>
        </div>

        <div class="auth-section" id="authSection">
            <div class="auth-tabs">
                <button class="tab-button active" id="loginTab">–í—Ö–æ–¥</button>
                <button class="tab-button" id="registerTab">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
            </div>

            <div id="loginForm">
                <div class="form-group">
                    <input type="text" id="loginUsername" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
                </div>
                <div class="form-group">
                    <input type="password" id="loginPassword" placeholder="–ü–∞—Ä–æ–ª—å">
                </div>
                <button class="btn btn-primary" id="loginBtn">–í–æ–π—Ç–∏</button>
            </div>

            <div id="registerForm" style="display: none;">
                <div class="form-group">
                    <input type="text" id="registerUsername" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
                </div>
                <div class="form-group">
                    <input type="email" id="registerEmail" placeholder="Email">
                </div>
                <div class="form-group">
                    <input type="password" id="registerPassword" placeholder="–ü–∞—Ä–æ–ª—å">
                </div>
                <button class="btn btn-primary" id="registerBtn">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
            </div>
        </div>

        <div class="main-content" id="mainContent">
            <div class="welcome-card">
                <button class="logout-btn" id="logoutBtn">–í—ã–π—Ç–∏</button>
                <h2>–ü—Ä–∏–≤–µ—Ç, <span id="userName">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>! üëã</h2>
                <p style="color: rgba(255, 255, 255, 0.9);">–ù–∞—á–Ω–∏ –¥–µ–ª–∞—Ç—å –º–∏—Ä –ª—É—á—à–µ —É–∂–µ —Å–µ–≥–æ–¥–Ω—è!</p>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-title">–í—Å–µ–≥–æ –æ—á–∫–æ–≤</div>
                    <div class="stat-value" id="totalPoints">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-title">–î–µ–π—Å—Ç–≤–∏–π —Å–µ–≥–æ–¥–Ω—è</div>
                    <div class="stat-value" id="todayActions">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-title">–í—Å–µ–≥–æ –¥–µ–π—Å—Ç–≤–∏–π</div>
                    <div class="stat-value" id="totalActions">0</div>
                </div>
            </div>

            <div class="leaderboard-section">
                <h2 class="section-title">üèÜ –¢–æ–ø-5 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>
                <div id="leaderboardList"></div>
            </div>

            <div class="progress-section">
                <h2 class="section-title">üìä –ü—Ä–æ–≥—Ä–µ—Å—Å –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</h2>
                <p style="color: white; margin-bottom: 10px;">–¶–µ–ª—å: 5 –¥–µ–π—Å—Ç–≤–∏–π –≤ –¥–µ–Ω—å</p>
                <div class="progress-bar-container">
                    <div class="progress-bar" id="progressBar" style="width: 0%;"></div>
                    <div class="progress-text-overlay">
                        <span id="progressText">0/5</span>
                    </div>
                </div>
            </div>

            <div class="progress-section">
                <h2 class="section-title">‚ú® –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–≤—ã—á–∫—É</h2>
                <div class="habits-grid" id="habitsGrid"></div>
            </div>

            <div class="my-actions-section">
                <h2 class="section-title">üìù –ú–æ–∏ –¥–µ–π—Å—Ç–≤–∏—è</h2>
                <div id="myActionsList"></div>
            </div>

            <div class="feed-section">
                <h2 class="section-title">üåç –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ª–µ–Ω—Ç–∞</h2>
                <div id="globalFeed"></div>
            </div>

            <div class="footer">
                <div class="contacts-title">üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã</div>
                <div class="contacts-grid">
                    <a href="https://t.me/Prototipe" target="_blank" class="contact-item">
                        <i class="fab fa-telegram contact-icon"></i>
                        <span class="contact-text">@Prototipe</span>
                    </a>
                    <a href="https://wa.me/996123456789" target="_blank" class="contact-item">
                        <i class="fab fa-whatsapp contact-icon"></i>
                        <span class="contact-text">+996 123 456 789</span>
                    </a>
                    <a href="https://github.com/Prototipe" target="_blank" class="contact-item">
                        <i class="fab fa-github contact-icon"></i>
                        <span class="contact-text">GitHub</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="editModal">
        <div class="modal-content">
            <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ</h3>
            <div class="form-group">
                <select id="editHabitSelect" style="width: 100%; padding: 15px; border-radius: 15px; border: 2px solid #667eea;">
                </select>
            </div>
            <div class="modal-buttons">
                <button class="btn btn-primary" id="saveEditBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button class="btn btn-cancel" id="cancelEditBtn">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <script>
        const API_CONFIG = {
            AUTH_URL: 'BACKEND_AUTH_ENDPOINT',
            REGISTER_URL: 'http://127.0.0.1:8000/api/register/',
            USER_STATS_URL: 'BACKEND_USER_STATS_ENDPOINT',
            LEADERBOARD_URL: 'BACKEND_LEADERBOARD_ENDPOINT',
            ACTIONS_URL: 'BACKEND_ACTIONS_ENDPOINT',
            GLOBAL_FEED_URL: 'BACKEND_GLOBAL_FEED_ENDPOINT',
            ADD_ACTION_URL: 'BACKEND_ADD_ACTION_ENDPOINT',
            UPDATE_ACTION_URL: 'BACKEND_UPDATE_ACTION_ENDPOINT',
            DELETE_ACTION_URL: 'BACKEND_DELETE_ACTION_ENDPOINT'
        };

        let currentUser = null;
        let currentToken = null;
        let habits = [];
        let myActions = [];
        let currentEditId = null;

        function setCookie(name, value, days) {
            const d = new Date();
            d.setTime(d.getTime() + (days * 24 * 60 * 60 * 1000));
            document.cookie = name + "=" + value + ";expires=" + d.toUTCString() + ";path=/";
        }

        function getCookie(name) {
            const nameEQ = name + "=";
            const ca = document.cookie.split(';');
            for(let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) == ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }

        function deleteCookie(name) {
            document.cookie = name + "=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/";
        }

        function createStars() {
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(star);
            }
        }

        function createShapes() {
            const shapesContainer = document.getElementById('shapes');
            const shapes = ['üåø', 'üå±', '‚ôªÔ∏è', 'üåç', 'üíö', 'üå≥'];
            for (let i = 0; i < 15; i++) {
                const shape = document.createElement('div');
                shape.className = 'shape';
                shape.textContent = shapes[Math.floor(Math.random() * shapes.length)];
                shape.style.left = Math.random() * 100 + '%';
                shape.style.top = Math.random() * 100 + '%';
                shape.style.fontSize = (Math.random() * 50 + 30) + 'px';
                shape.style.animationDelay = Math.random() * 20 + 's';
                shape.style.animationDuration = (Math.random() * 10 + 15) + 's';
                shapesContainer.appendChild(shape);
            }
        }

        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = 'notification ' + type;
            notification.textContent = message;
            document.body.appendChild(notification);
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        document.getElementById('loginTab').addEventListener('click', function() {
            document.getElementById('loginTab').classList.add('active');
            document.getElementById('registerTab').classList.remove('active');
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('registerForm').style.display = 'none';
        });

        document.getElementById('registerTab').addEventListener('click', function() {
            document.getElementById('registerTab').classList.add('active');
            document.getElementById('loginTab').classList.remove('active');
            document.getElementById('registerForm').style.display = 'block';
            document.getElementById('loginForm').style.display = 'none';
        });

        document.getElementById('loginBtn').addEventListener('click', async function() {
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!username || !password) {
                showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!', 'error');
                return;
            }

            try {
                const response = await fetch(API_CONFIG.AUTH_URL, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({username, password})
                });
                
                if (!response.ok) throw new Error('–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å');
                
                const data = await response.json();
                currentUser = data.username;
                currentToken = data.token;
                
                setCookie('ecotoken', currentToken, 30);
                setCookie('ecouser', currentUser, 30);
                
                loginSuccess();
            } catch (error) {
                showNotification('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É!', 'error');
            }
        });

        function loginSuccess() {
            showNotification('–í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ!', 'success');
            document.getElementById('authSection').style.display = 'none';
            document.getElementById('mainContent').classList.add('active');
            document.getElementById('userName').textContent = currentUser;
            loadHabits();
            loadStats();
            loadGlobalFeed();
            loadMyActions();
            loadLeaderboard();
        }

        document.getElementById('registerBtn').addEventListener('click', async function() {
            const username = document.getElementById('registerUsername').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            
            if (!username || !email || !password) {
                showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!', 'error');
                return;
            }

            try {
                const response = await fetch(API_CONFIG.REGISTER_URL, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({username, email, password})
                });
                
                if (!response.ok) throw new Error('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏');
                
                showNotification('–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞! –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É.', 'success');
                document.getElementById('loginTab').click();
            } catch (error) {
                showNotification('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞.', 'error');
                document.getElementById('loginTab').click();
            }
        });

        document.getElementById('logoutBtn').addEventListener('click', function() {
            currentUser = null;
            currentToken = null;
            deleteCookie('ecotoken');
            deleteCookie('ecouser');
            document.getElementById('authSection').style.display = 'block';
            document.getElementById('mainContent').classList.remove('active');
            showNotification('–í—ã –≤—ã—à–ª–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã', 'success');
        });

        function loadHabits() {
            habits = [
                { id: 1, name: '–°–¥–∞–ª –±–∞—Ç–∞—Ä–µ–π–∫–∏', icon: 'üîã', points: 10 },
                { id: 2, name: '–°–≤–æ–π —Å—Ç–∞–∫–∞–Ω', icon: '‚òï', points: 5 },
                { id: 3, name: '–í–µ–ª–æ—Å–∏–ø–µ–¥ –≤–º–µ—Å—Ç–æ –º–∞—à–∏–Ω—ã', icon: 'üö¥', points: 15 },
                { id: 4, name: '–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –º—É—Å–æ—Ä–∞', icon: '‚ôªÔ∏è', points: 8 },
                { id: 5, name: '–ú–Ω–æ–≥–æ—Ä–∞–∑–æ–≤–∞—è —Å—É–º–∫–∞', icon: 'üõçÔ∏è', points: 5 },
                { id: 6, name: '–≠–∫–æ–Ω–æ–º–∏—è –≤–æ–¥—ã', icon: 'üíß', points: 7 },
                { id: 7, name: '–ü–æ—Å–∞–¥–∏–ª –¥–µ—Ä–µ–≤–æ', icon: 'üå≥', points: 20 },
                { id: 8, name: '–í–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å–∫–∏–π –¥–µ–Ω—å', icon: 'ü•ó', points: 10 }
            ];

            const grid = document.getElementById('habitsGrid');
            grid.innerHTML = '';
            habits.forEach(habit => {
                const card = document.createElement('div');
                card.className = 'habit-card';
                card.innerHTML = '<div class="habit-icon">' + habit.icon + '</div><div class="habit-name">' + habit.name + '</div><div class="habit-points">+' + habit.points + ' –æ—á–∫–æ–≤</div>';
                card.addEventListener('click', function() {
                    addAction(habit);
                });
                grid.appendChild(card);
            });

            const editSelect = document.getElementById('editHabitSelect');
            editSelect.innerHTML = '';
            habits.forEach(habit => {
                const option = document.createElement('option');
                option.value = habit.id;
                option.textContent = habit.icon + ' ' + habit.name;
                editSelect.appendChild(option);
            });
        }

        async function addAction(habit) {
            showNotification('–ü—Ä–∏–≤—ã—á–∫–∞ "' + habit.name + '" –¥–æ–±–∞–≤–ª–µ–Ω–∞!', 'success');
            
            const newAction = {
                id: Date.now(),
                habit: habit,
                date: new Date().toISOString(),
                user: currentUser
            };
            
            try {
                await fetch(API_CONFIG.ADD_ACTION_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + currentToken
                    },
                    body: JSON.stringify(newAction)
                });
            } catch (error) {
                console.log('Using local storage');
            }
            
            myActions.unshift(newAction);
            loadStats();
            loadGlobalFeed();
            loadMyActions();
            loadLeaderboard();
        }

        async function loadStats() {
            try {
                const response = await fetch(API_CONFIG.USER_STATS_URL, {
                    headers: {'Authorization': 'Bearer ' + currentToken}
                });
                const data = await response.json();
                
                document.getElementById('totalPoints').textContent = data.totalPoints;
                document.getElementById('todayActions').textContent = data.todayActions;
                document.getElementById('totalActions').textContent = data.totalActions;
                
                updateProgress(data.todayActions);
            } catch (error) {
                let totalPoints = 0;
                let todayCount = 0;
                const today = new Date().toDateString();
                
                myActions.forEach(action => {
                    totalPoints += action.habit.points;
                    const actionDate = new Date(action.date).toDateString();
                    if (actionDate === today) {
                        todayCount++;
                    }
                });

                document.getElementById('totalPoints').textContent = totalPoints;
                document.getElementById('todayActions').textContent = todayCount;
                document.getElementById('totalActions').textContent = myActions.length;
                
                updateProgress(todayCount);
            }
        }

        function updateProgress(todayCount) {
            const progress = Math.min((todayCount / 5) * 100, 100);
            document.getElementById('progressBar').style.width = Math.max(progress, 10) + '%';
            document.getElementById('progressText').textContent = todayCount + '/5';
        }

        async function loadGlobalFeed() {
            const feed = document.getElementById('globalFeed');
            
            try {
                const response = await fetch(API_CONFIG.GLOBAL_FEED_URL);
                const data = await response.json();
                
                feed.innerHTML = '';
                data.forEach(action => {
                    const item = document.createElement('div');
                    item.className = 'feed-item';
                    const timeAgo = getTimeAgo(action.date);
                    item.innerHTML = '<div class="feed-user">' + action.habit.icon + ' ' + action.user + '</div><div class="feed-action">–≤—ã–ø–æ–ª–Ω–∏–ª(–∞): ' + action.habit.name + ' (+' + action.habit.points + ' –æ—á–∫–æ–≤)</div><div class="feed-time">' + timeAgo + '</div>';
                    feed.appendChild(item);
                });
            } catch (error) {
                feed.innerHTML = '';
                const allActions = [];
                myActions.forEach(action => allActions.push(action));

                const demoUsers = ['–ê–ª–∏—Å–∞', '–ë–æ–±', '–ö–∞—Ä–∏–Ω–∞', '–î–º–∏—Ç—Ä–∏–π', '–ï–ª–µ–Ω–∞'];
                for (let i = 0; i < 10; i++) {
                    const randomHabit = habits[Math.floor(Math.random() * habits.length)];
                    const randomUser = demoUsers[Math.floor(Math.random() * demoUsers.length)];
                    const randomDate = new Date(Date.now() - Math.random() * 86400000 * 3);
                    allActions.push({
                        id: 'demo_' + i,
                        habit: randomHabit,
                        date: randomDate.toISOString(),
                        user: randomUser
                    });
                }

                allActions.sort((a, b) => new Date(b.date) - new Date(a.date));

                allActions.slice(0, 15).forEach(action => {
                    const item = document.createElement('div');
                    item.className = 'feed-item';
                    const timeAgo = getTimeAgo(action.date);
                    item.innerHTML = '<div class="feed-user">' + action.habit.icon + ' ' + action.user + '</div><div class="feed-action">–≤—ã–ø–æ–ª–Ω–∏–ª(–∞): ' + action.habit.name + ' (+' + action.habit.points + ' –æ—á–∫–æ–≤)</div><div class="feed-time">' + timeAgo + '</div>';
                    feed.appendChild(item);
                });
            }
        }

        async function loadMyActions() {
            const list = document.getElementById('myActionsList');
            
            try {
                const response = await fetch(API_CONFIG.ACTIONS_URL, {
                    headers: {'Authorization': 'Bearer ' + currentToken}
                });
                const data = await response.json();
                myActions = data;
            } catch (error) {
                console.log('Using local actions');
            }
            
            list.innerHTML = '';
            
            if (myActions.length === 0) {
                list.innerHTML = '<p style="color: white; text-align: center;">–ü–æ–∫–∞ –Ω–µ—Ç –¥–µ–π—Å—Ç–≤–∏–π. –î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ—é –ø–µ—Ä–≤—É—é —ç–∫–æ-–ø—Ä–∏–≤—ã—á–∫—É! üå±</p>';
                return;
            }

            myActions.forEach(action => {
                const item = document.createElement('div');
                item.className = 'action-item';
                const timeAgo = getTimeAgo(action.date);
                item.innerHTML = '<div class="action-info"><div style="font-size: 18px; margin-bottom: 5px;">' + action.habit.icon + ' ' + action.habit.name + '</div><div style="font-size: 14px; opacity: 0.8;">+' + action.habit.points + ' –æ—á–∫–æ–≤ ‚Ä¢ ' + timeAgo + '</div></div><div class="action-buttons"><button class="btn-small btn-edit" onclick="editAction(' + action.id + ')">‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å</button><button class="btn-small btn-delete" onclick="deleteAction(' + action.id + ')">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button></div>';
                list.appendChild(item);
            });
        }

        async function loadLeaderboard() {
            const list = document.getElementById('leaderboardList');
            
            try {
                const response = await fetch(API_CONFIG.LEADERBOARD_URL);
                const data = await response.json();
                
                list.innerHTML = '';
                data.forEach((user, index) => {
                    const item = document.createElement('div');
                    item.className = 'leaderboard-item';
                    item.innerHTML = '<div class="leaderboard-rank">#' + (index + 1) + '</div><div class="leaderboard-user">' + user.username + '</div><div class="leaderboard-points">' + user.points + ' üåø</div>';
                    list.appendChild(item);
                });
            } catch (error) {
                const demoLeaders = [
                    {username: 'EcoHero', points: 1250},
                    {username: 'GreenWarrior', points: 980},
                    {username: 'NatureLover', points: 875},
                    {username: 'PlanetSaver', points: 720},
                    {username: 'EcoChampion', points: 650}
                ];
                
                list.innerHTML = '';
                demoLeaders.forEach((user, index) => {
                    const item = document.createElement('div');
                    item.className = 'leaderboard-item';
                    item.innerHTML = '<div class="leaderboard-rank">#' + (index + 1) + '</div><div class="leaderboard-user">' + user.username + '</div><div class="leaderboard-points">' + user.points + ' üåø</div>';
                    list.appendChild(item);
                });
            }
        }

        function getTimeAgo(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const seconds = Math.floor((now - date) / 1000);
            
            if (seconds < 60) return '—Ç–æ–ª—å–∫–æ —á—Ç–æ';
            if (seconds < 3600) return Math.floor(seconds / 60) + ' –º–∏–Ω. –Ω–∞–∑–∞–¥';
            if (seconds < 86400) return Math.floor(seconds / 3600) + ' —á. –Ω–∞–∑–∞–¥';
            if (seconds < 604800) return Math.floor(seconds / 86400) + ' –¥–Ω. –Ω–∞–∑–∞–¥';
            return date.toLocaleDateString('ru-RU');
        }

        function editAction(actionId) {
            currentEditId = actionId;
            const action = myActions.find(a => a.id === actionId);
            if (action) {
                document.getElementById('editHabitSelect').value = action.habit.id;
                document.getElementById('editModal').classList.add('active');
            }
        }

        async function deleteAction(actionId) {
            try {
                await fetch(API_CONFIG.DELETE_ACTION_URL + '/' + actionId, {
                    method: 'DELETE',
                    headers: {'Authorization': 'Bearer ' + currentToken}
                });
            } catch (error) {
                console.log('Using local delete');
            }
            
            myActions = myActions.filter(a => a.id !== actionId);
            showNotification('–î–µ–π—Å—Ç–≤–∏–µ —É–¥–∞–ª–µ–Ω–æ!', 'success');
            loadStats();
            loadGlobalFeed();
            loadMyActions();
            loadLeaderboard();
        }

        document.getElementById('saveEditBtn').addEventListener('click', async function() {
            const newHabitId = parseInt(document.getElementById('editHabitSelect').value);
            const newHabit = habits.find(h => h.id === newHabitId);
            
            const action = myActions.find(a => a.id === currentEditId);
            if (action) {
                action.habit = newHabit;
                
                try {
                    await fetch(API_CONFIG.UPDATE_ACTION_URL + '/' + currentEditId, {
                        method: 'PUT',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': 'Bearer ' + currentToken
                        },
                        body: JSON.stringify(action)
                    });
                } catch (error) {
                    console.log('Using local update');
                }
            }
            
            document.getElementById('editModal').classList.remove('active');
            showNotification('–î–µ–π—Å—Ç–≤–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–æ!', 'success');
            loadStats();
            loadGlobalFeed();
            loadMyActions();
        });

        document.getElementById('cancelEditBtn').addEventListener('click', function() {
            document.getElementById('editModal').classList.remove('active');
        });

        createStars();
        createShapes();

        document.getElementById('themeToggle').addEventListener('click', function() {
            document.body.classList.toggle('dark-theme');
            const isDark = document.body.classList.contains('dark-theme');
            document.getElementById('themeIcon').textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
            document.getElementById('themeText').textContent = isDark ? '–°–≤–µ—Ç–ª–∞—è' : '–¢–µ–º–Ω–∞—è';
        });

        const savedToken = getCookie('ecotoken');
        const savedUser = getCookie('ecouser');
        if (savedToken && savedUser) {
            currentToken = savedToken;
            currentUser = savedUser;
            loginSuccess();
        }

        setInterval(function() {
            if (currentUser) {
                loadGlobalFeed();
                loadLeaderboard();
            }
        }, 10000);
    </script>
</body>
</html>

